"use strict";(self.webpackChunkCustom_Furniture=self.webpackChunkCustom_Furniture||[]).push([[639],{9639:(ie,_,a)=>{a.r(_),a.d(_,{AuthModule:()=>oe});var p=a(9808),c=a(9560),e=a(1223),m=a(8386);let d=(()=>{class n{constructor(r,o){this.userService=r,this.router=o}canActivate(r,o){return!this.userService.isLogged||this.router.createUrlTree(["/orders"])}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(m.K),e.LFG(c.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=a(9390),i=a(2382);function f(n,t){if(1&n&&(e.TgZ(0,"p",16),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMessage," ")}}function x(n,t){1&n&&(e.TgZ(0,"p",16),e._uU(1," Email is required! "),e.qZA())}function Z(n,t){1&n&&(e.TgZ(0,"p",16),e._uU(1," Email is not valid! "),e.qZA())}function v(n,t){if(1&n&&(e.ynx(0),e.YNc(1,x,2,0,"p",1),e.YNc(2,Z,2,0,"p",1),e.BQk()),2&n){e.oxw();const r=e.MAs(10);e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.email)}}function h(n,t){1&n&&(e.TgZ(0,"p",16),e._uU(1," Password is required! "),e.qZA())}function T(n,t){1&n&&(e.TgZ(0,"p",16),e._uU(1," Password must be at least 5 characters! "),e.qZA())}function b(n,t){if(1&n&&(e.ynx(0),e.YNc(1,h,2,0,"p",1),e.YNc(2,T,2,0,"p",1),e.BQk()),2&n){e.oxw();const r=e.MAs(16);e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.minlength)}}let A=(()=>{class n{constructor(r,o){this.userService=r,this.router=o,this.errorMessage=void 0}login(r){if(r.invalid)return;const{email:o,password:s}=r.value;this.userService.login$({email:o,password:s}).subscribe({next:()=>{this.router.navigate(["/"])},error:l=>{this.errorMessage=l.error.message}})}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(m.K),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:24,vars:8,consts:[[1,"container","w-50","p-5","my-5","border","rounded-3"],["class","error",4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3","mt-3"],["for","email",1,"form-label"],["ngModel","","type","email","id","email","placeholder","Enter email","name","email","required","","email","",1,"form-control"],["emailInput","ngModel"],[4,"ngIf"],[1,"mb-3"],["for","password",1,"form-label"],["ngModel","","type","password","id","password","placeholder","Enter password","name","password","required","","minlength","5",1,"form-control"],["passwordInput","ngModel"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],[1,"text-center"],["routerLink","/users/register"],[1,"error"]],template:function(r,o){if(1&r){const s=e.EpF();e.TgZ(0,"div",0),e.YNc(1,f,2,1,"p",1),e.TgZ(2,"form",2,3),e.NdJ("ngSubmit",function(){e.CHM(s);const u=e.MAs(3);return o.login(u)}),e.TgZ(4,"h2"),e._uU(5,"Login Form"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Email:"),e.qZA(),e._UZ(9,"input",6,7),e.qZA(),e.YNc(11,v,3,2,"ng-container",8),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"Password:"),e.qZA(),e._UZ(15,"input",11,12),e.qZA(),e.YNc(17,b,3,2,"ng-container",8),e.TgZ(18,"button",13),e._uU(19,"Login"),e.qZA(),e.TgZ(20,"p",14),e._uU(21," Don't have an account? "),e.TgZ(22,"a",15),e._uU(23,"Register"),e.qZA()()()()}if(2&r){const s=e.MAs(3),l=e.MAs(10),u=e.MAs(16);e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(8),e.ekj("input-error",l.touched&&l.invalid),e.xp6(2),e.Q6J("ngIf",l.touched),e.xp6(4),e.ekj("input-error",u.touched&&u.invalid),e.xp6(2),e.Q6J("ngIf",u.touched),e.xp6(1),e.Q6J("disabled",s.invalid)}},directives:[p.O5,i._Y,i.JL,i.F,i.Fj,i.JJ,i.On,i.Q7,i.on,i.wO,c.yS],styles:[".error[_ngcontent-%COMP%]{color:red}.input-error[_ngcontent-%COMP%]{border-color:red}"]}),n})();function C(n,t){if(1&n&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Oqu(r.user.status)}}function U(n,t){if(1&n&&(e.TgZ(0,"p",11),e._uU(1),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.hij("Phone: ",r.user.tel,"")}}function q(n,t){if(1&n){const r=e.EpF();e.ynx(0),e.TgZ(1,"p",9),e._uU(2),e.YNc(3,C,2,1,"span",10),e.qZA(),e.TgZ(4,"p",11),e._uU(5),e.qZA(),e.YNc(6,U,2,1,"p",12),e.TgZ(7,"button",13),e.NdJ("click",function(){e.CHM(r);const s=e.oxw(2);return s.isEditing=!s.isEditing}),e._uU(8,"Edit Profile"),e.qZA(),e.BQk()}if(2&n){const r=e.oxw(2);e.xp6(2),e.hij("Username: ",r.user.username," "),e.xp6(1),e.Q6J("ngIf","provider"==r.user.status),e.xp6(2),e.hij("Email: ",r.user.email,""),e.xp6(1),e.Q6J("ngIf",r.user.tel)}}function I(n,t){1&n&&(e.TgZ(0,"p",33),e._uU(1," Username is required! "),e.qZA())}function w(n,t){1&n&&(e.TgZ(0,"p",33),e._uU(1," Username must be at least 4 characters! "),e.qZA())}function J(n,t){if(1&n&&(e.ynx(0),e.YNc(1,I,2,0,"p",32),e.YNc(2,w,2,0,"p",32),e.BQk()),2&n){e.oxw();const r=e.MAs(10);e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.minlength)}}function y(n,t){1&n&&(e.TgZ(0,"p",33),e._uU(1," Email is required! "),e.qZA())}function Q(n,t){1&n&&(e.TgZ(0,"p",33),e._uU(1," Email is not valid! "),e.qZA())}function M(n,t){if(1&n&&(e.ynx(0),e.YNc(1,y,2,0,"p",32),e.YNc(2,Q,2,0,"p",32),e.BQk()),2&n){e.oxw();const r=e.MAs(16);e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.email)}}function P(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(r);const s=e.MAs(1);return e.oxw(2).submit(s)}),e.TgZ(2,"div",17)(3,"p",18),e._uU(4,"Profile Image:"),e.qZA(),e.TgZ(5,"input",19),e.NdJ("change",function(s){return e.CHM(r),e.oxw(2).profilePictureChange(s)}),e.qZA()(),e.TgZ(6,"div",17)(7,"label",20),e._uU(8,"Username:"),e.qZA(),e._UZ(9,"input",21,22),e.qZA(),e.YNc(11,J,3,2,"ng-container",6),e.TgZ(12,"div",17)(13,"label",23),e._uU(14,"Email:"),e.qZA(),e._UZ(15,"input",24,25),e.qZA(),e.YNc(17,M,3,2,"ng-container",6),e.TgZ(18,"div",17)(19,"label",26),e._uU(20,"Telephone: "),e.TgZ(21,"span",27),e._uU(22,"( Optional )"),e.qZA()(),e._UZ(23,"input",28,29),e.qZA(),e.TgZ(25,"button",30),e._uU(26,"Submit"),e.qZA(),e.TgZ(27,"button",31),e.NdJ("click",function(){e.CHM(r);const s=e.oxw(2);return s.isEditing=!s.isEditing}),e._uU(28,"Cancel"),e.qZA()()}if(2&n){const r=e.MAs(1),o=e.MAs(10),s=e.MAs(16),l=e.oxw(2);e.xp6(9),e.ekj("input-error",o.touched&&o.invalid),e.Q6J("ngModel",l.user.username),e.xp6(2),e.Q6J("ngIf",o.touched&&o.invalid),e.xp6(4),e.ekj("input-error",s.touched&&s.invalid),e.Q6J("ngModel",l.user.email),e.xp6(2),e.Q6J("ngIf",s.touched&&s.invalid),e.xp6(6),e.Q6J("ngModel",l.user.tel),e.xp6(2),e.Q6J("disabled",r.invalid)}}function N(n,t){1&n&&(e.TgZ(0,"h3",36),e._uU(1,"Your Orders"),e.qZA())}function Y(n,t){1&n&&(e.TgZ(0,"h3",36),e._uU(1,"You have no orders yet"),e.qZA())}const k=function(n){return["/orders",n]};function E(n,t){if(1&n&&(e.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"div",39),e._UZ(4,"img",40),e.qZA(),e.TgZ(5,"div",41)(6,"div",42)(7,"h2",43),e._uU(8),e.qZA(),e.TgZ(9,"p",44),e._uU(10),e.qZA(),e.TgZ(11,"p",44),e._uU(12),e.qZA()()()()()()),2&n){const r=t.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(5,k,r._id)),e.xp6(3),e.Q6J("src",r.imageUrl?r.imageUrl:"/assets/sketching1.png",e.LSH),e.xp6(4),e.Oqu(r.orderName),e.xp6(2),e.hij("Location: ",r.address,""),e.xp6(2),e.Oqu(r.description)}}function L(n,t){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,N,2,0,"h3",34),e.YNc(2,Y,2,0,"h3",34),e.YNc(3,E,13,7,"div",35),e.qZA()),2&n){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.user.orders.length>0),e.xp6(1),e.Q6J("ngIf",r.user.orders.length<=0),e.xp6(1),e.Q6J("ngForOf",r.user.orders)}}function S(n,t){if(1&n&&(e.TgZ(0,"div",1)(1,"section",2)(2,"div",3),e._UZ(3,"img",4),e.TgZ(4,"div",5),e.YNc(5,q,9,4,"ng-container",6),e.YNc(6,P,29,10,"form",7),e.qZA(),e.YNc(7,L,4,3,"div",8),e.qZA()()()),2&n){const r=e.oxw();e.xp6(3),e.Q6J("src",r.user.profileImageUrl?r.user.profileImageUrl:"/assets/profile.png",e.LSH),e.xp6(2),e.Q6J("ngIf",!r.isEditing),e.xp6(1),e.Q6J("ngIf",r.isEditing),e.xp6(1),e.Q6J("ngIf",r.user&&r.user.orders)}}let F=(()=>{class n{constructor(r){this.userService=r,this.isEditing=!1}get user(){return this.userService.user}ngOnInit(){}submit(r){if(r.invalid)return;const o={username:r.value.username,email:r.value.email,profileImageUrl:this.newProfilePicture};r.value.tel&&(o.tel=r.value.tel),this.userService.updateProfileInfo$(o).subscribe(()=>{this.isEditing=!this.isEditing})}profilePictureChange(r){this.newProfilePicture=r.target.files[0]}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(m.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","container px-5 text-center text-lg-start",4,"ngIf"],[1,"container","px-5","text-center","text-lg-start"],[1,"main","mx-5","mt-5","border","rounded-3"],[1,""],["alt","Profile Image",1,"d-block","mx-auto","rounded-circle","my-5","border","border-3","border-dark",3,"src"],[1,"border-top","p-5"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","",4,"ngIf"],[1,"fs-1"],["class","fs-5 ms-3 badge rounded-pill bg-secondary",4,"ngIf"],[1,"fs-4"],["class","fs-4",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fs-5","ms-3","badge","rounded-pill","bg-secondary"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3","mt-3"],["for","profileImageUrl"],["type","file","accept","image/*","id","profileImageUrl","name","profileImageUrl",3,"change"],["for","username",1,"form-label"],["type","username","id","username","placeholder","Enter username","name","username","required","","minlength","4",1,"form-control",3,"ngModel"],["usernameInput","ngModel"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter email","name","email","required","","email","",1,"form-control",3,"ngModel"],["emailInput","ngModel"],["for","tel",1,"form-label"],[1,"small","text-muted"],["type","tel","id","tel","placeholder","Enter telephone","name","tel",1,"form-control",3,"ngModel"],["telInput","ngModel"],[1,"btn","btn-primary","me-2",3,"disabled"],["type","button",1,"btn","btn-danger","mx-2",3,"click"],["class","error",4,"ngIf"],[1,"error"],["class","text-center border-top pt-3",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center","border-top","pt-3"],[1,"card","mx-auto","my-4","w-75",3,"routerLink"],[1,"row","g-0"],[1,"col-md-4"],["alt","Order image",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","mb-3","pb-2","border-bottom"],[1,"card-text"]],template:function(r,o){1&r&&e.YNc(0,S,8,4,"div",0),2&r&&e.Q6J("ngIf",o.user)},directives:[p.O5,i._Y,i.JL,i.F,i.Fj,i.Q7,i.wO,i.JJ,i.On,i.on,p.sg,c.rH],styles:["img[_ngcontent-%COMP%]{width:300px;height:300px}.error[_ngcontent-%COMP%]{color:red}.input-error[_ngcontent-%COMP%]{border-color:red}"]}),n})();var O=a(7579),R=a(2722);function j(n,t){let r=null;return function(o){r&&(r.unsubscribe(),r=null);const s=n();return s?(r=s.valueChanges.pipe((0,R.R)(t)).subscribe({next:()=>{o.updateValueAndValidity()},complete:()=>{r=null}}),(null==s?void 0:s.value)===(null==o?void 0:o.value)?null:{sameValue:!0}):null}}function B(n,t){if(1&n&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMessage," ")}}function G(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Username is required! "),e.qZA())}function H(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Username must be at least 5 characters! "),e.qZA())}function K(n,t){if(1&n&&(e.ynx(0),e.YNc(1,G,2,0,"p",1),e.YNc(2,H,2,0,"p",1),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.form.controls.username.errors?null:r.form.controls.username.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.form.controls.username.errors?null:r.form.controls.username.errors.minlength)}}function V(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Email is required! "),e.qZA())}function X(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Email is not valid! "),e.qZA())}function $(n,t){if(1&n&&(e.ynx(0),e.YNc(1,V,2,0,"p",1),e.YNc(2,X,2,0,"p",1),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function z(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Password is required! "),e.qZA())}function D(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1," Password must be at least 5 characters! "),e.qZA())}function W(n,t){if(1&n&&(e.ynx(0),e.YNc(1,z,2,0,"p",1),e.YNc(2,D,2,0,"p",1),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.minlength)}}function ee(n,t){1&n&&(e.ynx(0),e.TgZ(1,"p",20),e._uU(2,"Repeat Password does not match password!"),e.qZA(),e.BQk())}const ne=c.Bz.forChild([{path:"login",canActivate:[d],component:A},{path:"register",canActivate:[d],component:(()=>{class n{constructor(r,o,s){this.userService=r,this.formBuilder=o,this.router=s,this.errorMessage=void 0,this.killSubscription=new O.x,this.form=this.formBuilder.group({username:["",[i.kI.required,i.kI.minLength(5)]],email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(5)]],repass:["",[i.kI.required,j(()=>{var l;return null===(l=this.form)||void 0===l?void 0:l.get("password")},this.killSubscription)]],tel:[""]})}register(){if(this.form.invalid)return;const{username:r,email:o,password:s,tel:l}=this.form.value,u={username:r,email:o,password:s};""!==l&&(u.tel=l),this.userService.register$(u).subscribe({next:()=>{this.router.navigate(["/"])},error:te=>{this.errorMessage=te.error.message}})}ngOnDestroy(){this.killSubscription.next(null),this.killSubscription.complete()}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(m.K),e.Y36(i.qu),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:37,vars:9,consts:[[1,"container","w-50","p-5","my-5","border","rounded-3"],["class","error",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3","mt-3"],["for","username",1,"form-label"],["formControlName","username","type","username","id","username","placeholder","Enter username","name","username",1,"form-control"],[4,"ngIf"],["for","email",1,"form-label"],["formControlName","email","type","email","id","email","placeholder","Enter email","name","email",1,"form-control"],["for","tel",1,"form-label"],[1,"small","text-muted"],["formControlName","tel","type","tel","id","tel","placeholder","Enter telephone","name","tel",1,"form-control"],[1,"mb-3"],["for","password",1,"form-label"],["formControlName","password","type","password","id","password","placeholder","Enter password","name","password",1,"form-control"],["for","repass",1,"form-label"],["formControlName","repass","type","password","id","repass","placeholder","Repeat password","name","repass",1,"form-control"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],[1,"text-center"],["routerLink","/users/login"],[1,"error"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0),e.YNc(1,B,2,1,"p",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(3,"h2"),e._uU(4,"Register Form"),e.qZA(),e.TgZ(5,"div",3)(6,"label",4),e._uU(7,"Username:"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.YNc(9,K,3,2,"ng-container",6),e.TgZ(10,"div",3)(11,"label",7),e._uU(12,"Email:"),e.qZA(),e._UZ(13,"input",8),e.qZA(),e.YNc(14,$,3,2,"ng-container",6),e.TgZ(15,"div",3)(16,"label",9),e._uU(17,"Telephone: "),e.TgZ(18,"span",10),e._uU(19,"( Optional )"),e.qZA()(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23,"Password:"),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.YNc(25,W,3,2,"ng-container",6),e.TgZ(26,"div",12)(27,"label",15),e._uU(28,"Repeat Password:"),e.qZA(),e._UZ(29,"input",16),e.qZA(),e.YNc(30,ee,3,0,"ng-container",6),e.TgZ(31,"button",17),e._uU(32,"Create Account"),e.qZA(),e.TgZ(33,"p",18),e._uU(34," Have an account? "),e.TgZ(35,"a",19),e._uU(36,"Log In"),e.qZA()()()()),2&r&&(e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(6),e.ekj("input-error",o.form.controls.username.touched&&o.form.controls.username.invalid),e.xp6(1),e.Q6J("ngIf",o.form.controls.username.touched&&o.form.controls.username.invalid),e.xp6(5),e.Q6J("ngIf",o.form.controls.email.touched&&o.form.controls.email.invalid),e.xp6(11),e.Q6J("ngIf",o.form.controls.password.touched&&o.form.controls.password.invalid),e.xp6(5),e.Q6J("ngIf",o.form.controls.repass.touched&&o.form.controls.repass.invalid),e.xp6(1),e.Q6J("disabled",o.form.invalid))},directives:[p.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c.yS],styles:[".error[_ngcontent-%COMP%]{color:red}.input-error[_ngcontent-%COMP%]{border-color:red}"]}),n})()},{path:"profile",canActivate:[g.j],component:F}]);let oe=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,ne,i.u5,i.UX]]}),n})()}}]);